var http = require('http');
var express = require('express')
var request = require('request');

var receipt_strdata = {"appid":"3001259821","appuserid":"userid001","cporderid":"1501070399701","cpprivate":"cpprivateinfo123456","currency":"RMB","feetype":0,"money":0.01,"paytype":103,"result":0,"transid":"32281707261959596476","transtime":"2017-07-26 20:00:37","transtype":0,"waresid":6};

var post_data = {
	type: 'c2s_verifypurchase',
	playerid: 1,
    platformtype: 1,
    shopType: 0,
    transactionId: '1501070399701',
    productId: '1',
    //receipt: 'ewoJInNpZ25hdHVyZSIgPSAiQXltc3pJVWJkOGZyNDVPQjV1ZTlydXAwWDExNHU4U2p5Ulg2N0JZUWZuUWpRZmoxb0x3cDFkeUljcmJucXBiMGJCbi8vTnQ4dklRenNNcWRCS1N2MkFRYmZoQllvVTR0UWcwNlJDZlhWamhyVWVsemlqNmd2bGxmQmZzaDJianZmR2d6dms3eWtRZlI0VGUwR2JkQlBoTGl3NWVwWXJYQUpJUFUvYU04TnBadmdIS3lFVGlwdUVIUzFHL25nZ1ZjSmliUGo1Ymp6ZHU4Ukk4NTU5WXVOeVIyVGw2SnZaRThyWGYzeXNOWkZNcmQvNFQxNWlJKzY1bFpjS0J2aFYxSDZFT1E3dHBxQnIyVVRzZjhaRHNYN3hwYmxHNjg0a1RpUGFUb1NqNy9ZV0ZqeXBLTVJGQ21BNnV0akVlUTQ1ZnhteHFqTmZaY0xLd2swYVc5YnhkT3Mzc0FBQVdBTUlJRmZEQ0NCR1NnQXdJQkFnSUlEdXRYaCtlZUNZMHdEUVlKS29aSWh2Y05BUUVGQlFBd2daWXhDekFKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFLREFwQmNIQnNaU0JKYm1NdU1Td3dLZ1lEVlFRTERDTkJjSEJzWlNCWGIzSnNaSGRwWkdVZ1JHVjJaV3h2Y0dWeUlGSmxiR0YwYVc5dWN6RkVNRUlHQTFVRUF3dzdRWEJ3YkdVZ1YyOXliR1IzYVdSbElFUmxkbVZzYjNCbGNpQlNaV3hoZEdsdmJuTWdRMlZ5ZEdsbWFXTmhkR2x2YmlCQmRYUm9iM0pwZEhrd0hoY05NVFV4TVRFek1ESXhOVEE1V2hjTk1qTXdNakEzTWpFME9EUTNXakNCaVRFM01EVUdBMVVFQXd3dVRXRmpJRUZ3Y0NCVGRHOXlaU0JoYm1RZ2FWUjFibVZ6SUZOMGIzSmxJRkpsWTJWcGNIUWdVMmxuYm1sdVp6RXNNQ29HQTFVRUN3d2pRWEJ3YkdVZ1YyOXliR1IzYVdSbElFUmxkbVZzYjNCbGNpQlNaV3hoZEdsdmJuTXhFekFSQmdOVkJBb01Da0Z3Y0d4bElFbHVZeTR4Q3pBSkJnTlZCQVlUQWxWVE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBcGMrQi9TV2lnVnZXaCswajJqTWNqdUlqd0tYRUpzczl4cC9zU2cxVmh2K2tBdGVYeWpsVWJYMS9zbFFZbmNRc1VuR09aSHVDem9tNlNkWUk1YlNJY2M4L1cwWXV4c1FkdUFPcFdLSUVQaUY0MWR1MzBJNFNqWU5NV3lwb041UEM4cjBleE5LaERFcFlVcXNTNCszZEg1Z1ZrRFV0d3N3U3lvMUlnZmRZZUZScjZJd3hOaDlLQmd4SFZQTTNrTGl5a29sOVg2U0ZTdUhBbk9DNnBMdUNsMlAwSzVQQi9UNXZ5c0gxUEttUFVockFKUXAyRHQ3K21mNy93bXYxVzE2c2MxRkpDRmFKekVPUXpJNkJBdENnbDdaY3NhRnBhWWVRRUdnbUpqbTRIUkJ6c0FwZHhYUFEzM1k3MkMzWmlCN2o3QWZQNG83UTAvb21WWUh2NGdOSkl3SURBUUFCbzRJQjF6Q0NBZE13UHdZSUt3WUJCUVVIQVFFRU16QXhNQzhHQ0NzR0FRVUZCekFCaGlOb2RIUndPaTh2YjJOemNDNWhjSEJzWlM1amIyMHZiMk56Y0RBekxYZDNaSEl3TkRBZEJnTlZIUTRFRmdRVWthU2MvTVIydDUrZ2l2Uk45WTgyWGUwckJJVXdEQVlEVlIwVEFRSC9CQUl3QURBZkJnTlZIU01FR0RBV2dCU0lKeGNKcWJZWVlJdnM2N3IyUjFuRlVsU2p0ekNDQVI0R0ExVWRJQVNDQVJVd2dnRVJNSUlCRFFZS0tvWklodmRqWkFVR0FUQ0IvakNCd3dZSUt3WUJCUVVIQWdJd2diWU1nYk5TWld4cFlXNWpaU0J2YmlCMGFHbHpJR05sY25ScFptbGpZWFJsSUdKNUlHRnVlU0J3WVhKMGVTQmhjM04xYldWeklHRmpZMlZ3ZEdGdVkyVWdiMllnZEdobElIUm9aVzRnWVhCd2JHbGpZV0pzWlNCemRHRnVaR0Z5WkNCMFpYSnRjeUJoYm1RZ1kyOXVaR2wwYVc5dWN5QnZaaUIxYzJVc0lHTmxjblJwWm1sallYUmxJSEJ2YkdsamVTQmhibVFnWTJWeWRHbG1hV05oZEdsdmJpQndjbUZqZEdsalpTQnpkR0YwWlcxbGJuUnpMakEyQmdnckJnRUZCUWNDQVJZcWFIUjBjRG92TDNkM2R5NWhjSEJzWlM1amIyMHZZMlZ5ZEdsbWFXTmhkR1ZoZFhSb2IzSnBkSGt2TUE0R0ExVWREd0VCL3dRRUF3SUhnREFRQmdvcWhraUc5Mk5rQmdzQkJBSUZBREFOQmdrcWhraUc5dzBCQVFVRkFBT0NBUUVBRGFZYjB5NDk0MXNyQjI1Q2xtelQ2SXhETUlKZjRGelJqYjY5RDcwYS9DV1MyNHlGdzRCWjMrUGkxeTRGRkt3TjI3YTQvdncxTG56THJSZHJqbjhmNUhlNXNXZVZ0Qk5lcGhtR2R2aGFJSlhuWTR3UGMvem83Y1lmcnBuNFpVaGNvT0FvT3NBUU55MjVvQVE1SDNPNXlBWDk4dDUvR2lvcWJpc0IvS0FnWE5ucmZTZW1NL2oxbU9DK1JOdXhUR2Y4YmdwUHllSUdxTktYODZlT2ExR2lXb1IxWmRFV0JHTGp3Vi8xQ0tuUGFObVNBTW5CakxQNGpRQmt1bGhnd0h5dmozWEthYmxiS3RZZGFHNllRdlZNcHpjWm04dzdISG9aUS9PamJiOUlZQVlNTnBJcjdONFl0UkhhTFNQUWp2eWdhWndYRzU2QWV6bEhSVEJoTDhjVHFBPT0iOwoJInB1cmNoYXNlLWluZm8iID0gImV3b0pJbTl5YVdkcGJtRnNMWEIxY21Ob1lYTmxMV1JoZEdVdGNITjBJaUE5SUNJeU1ERTNMVEEzTFRBeklEQXhPalEzT2pJM0lFRnRaWEpwWTJFdlRHOXpYMEZ1WjJWc1pYTWlPd29KSW5WdWFYRjFaUzFwWkdWdWRHbG1hV1Z5SWlBOUlDSXpaR1F6TURGaFpEUmhNR1ZoWXpNNVlqSTJNVFJrTWpaalpUbGpZVGczTVRsak9XRTJNbUZtSWpzS0NTSnZjbWxuYVc1aGJDMTBjbUZ1YzJGamRHbHZiaTFwWkNJZ1BTQWlNVEF3TURBd01ETXhNVGs1T0RNME15STdDZ2tpWW5aeWN5SWdQU0FpTVM0d0xqSXlJanNLQ1NKMGNtRnVjMkZqZEdsdmJpMXBaQ0lnUFNBaU1UQXdNREF3TURNeE1UazVPRE0wTXlJN0Nna2ljWFZoYm5ScGRIa2lJRDBnSWpFaU93b0pJbTl5YVdkcGJtRnNMWEIxY21Ob1lYTmxMV1JoZEdVdGJYTWlJRDBnSWpFME9Ua3dOekUyTkRjd01EQWlPd29KSW5WdWFYRjFaUzEyWlc1a2IzSXRhV1JsYm5ScFptbGxjaUlnUFNBaVFUQXpOekEzTlVFdE5qWTFOaTAwUWpSRkxVSkZSakF0UVRsRFJUWkVNVE14TkRRNUlqc0tDU0p3Y205a2RXTjBMV2xrSWlBOUlDSmpZMTlrYVdGdGIyNWtjMTh4SWpzS0NTSnBkR1Z0TFdsa0lpQTlJQ0l4TWpVek9ESTFOakl5SWpzS0NTSmlhV1FpSUQwZ0ltTnZiUzVqWm1kbExtTnNiM1JvWlhOamFHRnVaMlVpT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakUwT1Rrd056RTJORGN3TURBaU93b0pJbkIxY21Ob1lYTmxMV1JoZEdVaUlEMGdJakl3TVRjdE1EY3RNRE1nTURnNk5EYzZNamNnUlhSakwwZE5WQ0k3Q2draWNIVnlZMmhoYzJVdFpHRjBaUzF3YzNRaUlEMGdJakl3TVRjdE1EY3RNRE1nTURFNk5EYzZNamNnUVcxbGNtbGpZUzlNYjNOZlFXNW5aV3hsY3lJN0Nna2liM0pwWjJsdVlXd3RjSFZ5WTJoaGMyVXRaR0YwWlNJZ1BTQWlNakF4Tnkwd055MHdNeUF3T0RvME56b3lOeUJGZEdNdlIwMVVJanNLZlE9PSI7CgkiZW52aXJvbm1lbnQiID0gIlNhbmRib3giOwoJInBvZCIgPSAiMTAwIjsKCSJzaWduaW5nLXN0YXR1cyIgPSAiMCI7Cn0=',
    receipt: JSON.stringify(receipt_strdata),
    signature: 'com.superant.classicvegas.chips1',
};
var posturl = 'http://192.168.30.100:60008/verifyaccount';
request(
    {
        method : 'POST',
        uri : posturl,
        json: true,
		headers: {
			"content-type": "application/json",
		},
		body: post_data
    }, function(error, response, body) {
		if (error) {
			console.log('[post]');
			console.log('[post] error : ' + error);
			return;
		}
				
		if (response.statusCode == 200) {
			console.log('[post]');
			console.log('[post] response : %s', JSON.stringify(response));
			console.log('[post]');
			console.log('[post] body : %s, now:%d', JSON.stringify(body), Date.now());
		}
	}
);